<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Clay Documentation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./clay_book.examples.html" rel="next">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="icon" href="notebooks/favicon.ico">


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./index.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Clay</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Clay Documentation</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Clay</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./clay_book.examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Examples</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./clay_book.emmy_viewers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Emmy-viewers</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#clay" id="toc-clay" class="nav-link active" data-scroll-target="#clay"><span class="header-section-number">1</span> Clay</a>
  <ul>
  <li><a href="#about" id="toc-about" class="nav-link" data-scroll-target="#about"><span class="header-section-number">1.1</span> About</a></li>
  <li><a href="#goals" id="toc-goals" class="nav-link" data-scroll-target="#goals"><span class="header-section-number">1.2</span> Goals</a></li>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started"><span class="header-section-number">1.3</span> Getting started</a></li>
  <li><a href="#projects-using-clay" id="toc-projects-using-clay" class="nav-link" data-scroll-target="#projects-using-clay"><span class="header-section-number">1.4</span> Projects using Clay</a></li>
  <li><a href="#videos" id="toc-videos" class="nav-link" data-scroll-target="#videos"><span class="header-section-number">1.5</span> Videos</a></li>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup"><span class="header-section-number">1.6</span> Setup</a>
  <ul class="collapse">
  <li><a href="#vscode-calva" id="toc-vscode-calva" class="nav-link" data-scroll-target="#vscode-calva"><span class="header-section-number">1.6.1</span> VSCode Calva</a></li>
  <li><a href="#emacs-cider" id="toc-emacs-cider" class="nav-link" data-scroll-target="#emacs-cider"><span class="header-section-number">1.6.2</span> Emacs CIDER</a></li>
  <li><a href="#neovim-conjure" id="toc-neovim-conjure" class="nav-link" data-scroll-target="#neovim-conjure"><span class="header-section-number">1.6.3</span> Neovim Conjure</a></li>
  <li><a href="#intellij-cursive" id="toc-intellij-cursive" class="nav-link" data-scroll-target="#intellij-cursive"><span class="header-section-number">1.6.4</span> IntelliJ Cursive</a></li>
  </ul></li>
  <li><a href="#example-notebook-namespace" id="toc-example-notebook-namespace" class="nav-link" data-scroll-target="#example-notebook-namespace"><span class="header-section-number">1.7</span> Example notebook namespace</a></li>
  <li><a href="#api" id="toc-api" class="nav-link" data-scroll-target="#api"><span class="header-section-number">1.8</span> API</a>
  <ul class="collapse">
  <li><a href="#live-reload" id="toc-live-reload" class="nav-link" data-scroll-target="#live-reload"><span class="header-section-number">1.8.1</span> Live reload</a></li>
  <li><a href="#hiccup-output" id="toc-hiccup-output" class="nav-link" data-scroll-target="#hiccup-output"><span class="header-section-number">1.8.2</span> Hiccup output</a></li>
  </ul></li>
  <li><a href="#configuration" id="toc-configuration" class="nav-link" data-scroll-target="#configuration"><span class="header-section-number">1.9</span> Configuration</a></li>
  <li><a href="#kinds" id="toc-kinds" class="nav-link" data-scroll-target="#kinds"><span class="header-section-number">1.10</span> Kinds</a></li>
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples"><span class="header-section-number">1.11</span> Examples</a></li>
  <li><a href="#fragments" id="toc-fragments" class="nav-link" data-scroll-target="#fragments"><span class="header-section-number">1.12</span> Fragments</a>
  <ul class="collapse">
  <li><a href="#subsection-purple" id="toc-subsection-purple" class="nav-link" data-scroll-target="#subsection-purple"><span class="header-section-number">1.12.1</span> subsection: purple</a></li>
  <li><a href="#subsection-darkgreen" id="toc-subsection-darkgreen" class="nav-link" data-scroll-target="#subsection-darkgreen"><span class="header-section-number">1.12.2</span> subsection: darkgreen</a></li>
  <li><a href="#subsection-brown" id="toc-subsection-brown" class="nav-link" data-scroll-target="#subsection-brown"><span class="header-section-number">1.12.3</span> subsection: brown</a></li>
  </ul></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions"><span class="header-section-number">1.13</span> Functions</a></li>
  <li><a href="#delays" id="toc-delays" class="nav-link" data-scroll-target="#delays"><span class="header-section-number">1.14</span> Delays</a></li>
  <li><a href="#referring-to-files" id="toc-referring-to-files" class="nav-link" data-scroll-target="#referring-to-files"><span class="header-section-number">1.15</span> Referring to files</a></li>
  <li><a href="#hiding-code" id="toc-hiding-code" class="nav-link" data-scroll-target="#hiding-code"><span class="header-section-number">1.16</span> Hiding code</a></li>
  <li><a href="#test-generation" id="toc-test-generation" class="nav-link" data-scroll-target="#test-generation"><span class="header-section-number">1.17</span> Test generation</a></li>
  <li><a href="#css-classes-and-styles" id="toc-css-classes-and-styles" class="nav-link" data-scroll-target="#css-classes-and-styles"><span class="header-section-number">1.18</span> CSS classes and styles</a>
  <ul class="collapse">
  <li><a href="#styling-html-visualizations" id="toc-styling-html-visualizations" class="nav-link" data-scroll-target="#styling-html-visualizations"><span class="header-section-number">1.18.1</span> Styling HTML visualizations</a></li>
  <li><a href="#styling-markdown-content" id="toc-styling-markdown-content" class="nav-link" data-scroll-target="#styling-markdown-content"><span class="header-section-number">1.18.2</span> Styling Markdown content</a></li>
  </ul></li>
  <li><a href="#varying-kindly-options" id="toc-varying-kindly-options" class="nav-link" data-scroll-target="#varying-kindly-options"><span class="header-section-number">1.19</span> Varying kindly options</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Clay Documentation</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<style></style>
<style>.printedClojure .sourceCode {
  background-color: transparent;
  border-style: none;
}
</style>
<style>.clay-limit-image-width .clay-image {max-width: 100%}
.clay-side-by-side .sourceCode {margin: 0}
.clay-side-by-side {margin: 1em 0}
</style>
<script src="index_files/md-default1.js" type="text/javascript"></script>
<script src="index_files/md-default2.js" type="text/javascript"></script>
<script src="index_files/vega3.js" type="text/javascript"></script>
<script src="index_files/vega4.js" type="text/javascript"></script>
<script src="index_files/vega5.js" type="text/javascript"></script>
<section id="clay" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Clay</h1>
<img alt="Clay logo" src="https://raw.githubusercontent.com/scicloj/clay/main/resources/Clay.svg.png" style="width:100px;">
<section id="about" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="about"><span class="header-section-number">1.1</span> About</h2>
<p><a href="https://github.com/scicloj/clay">Clay</a> is a minimalistic Clojure tool for data visualization and literate programming, compatible with the <a href="https://scicloj.github.io/kindly-noted/kindly">Kindly</a> convention. It allows to conduct visual data explorations and create documents (HTML pages like this one, books, blog posts, reports, slideshows) from source code and comments.</p>
<p><strong>Source:</strong> <a href="https://github.com/scicloj/clay"><img src="https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&amp;logo=github&amp;logoColor=white" class="img-fluid" alt="(GitHub repo)"></a></p>
<p><strong>Artifact:</strong> <a href="https://clojars.org/org.scicloj/clay"><img src="https://img.shields.io/clojars/v/org.scicloj/clay.svg" class="img-fluid" alt="Clojars Project"></a></p>
<p><strong>Status:</strong> The project has moved into Beta stage (March 2024).</p>
</section>
<section id="goals" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="goals"><span class="header-section-number">1.2</span> Goals</h2>
<ul>
<li>Easily explore &amp; share data visualizations and notebooks for others to easily pick &amp; use.</li>
<li>Encourage writing Kindly-compatible notes for future compatiblity with other tools.</li>
<li>Flow with the REPL: encourage user interactions that flow naturally with the typical use of Clojure in editors and REPLs.</li>
</ul>
</section>
<section id="getting-started" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="getting-started"><span class="header-section-number">1.3</span> Getting started</h2>
<p>Add Clay to your project dependencies: <a href="https://clojars.org/org.scicloj/clay"><img src="https://img.shields.io/clojars/v/org.scicloj/clay.svg" class="img-fluid" alt="Clojars Project"></a></p>
<p>(If you like to use <a href="https://practical.li/blog-staging/posts/clojure-cli-tools-understanding-aliases/">aliases</a>, you may add under it to the extra dependencies under an alias. See, for example, the <a href="https://github.com/scicloj/noj/blob/main/deps.edn">deps.edn</a> file of <a href="https://github.com/scicloj/noj">Noj</a>. If you do not know what this means, just add it under the main <code>:deps</code> section of your <code>deps.edn</code> file.)</p>
<p>To render a given Clojure namespace, say <code>"notebooks/index.clj"</code>, you may run the following in the REPL:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb1"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">require</span> '[scicloj.clay.v2.api <span class="at">:as</span> clay])</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>(clay/make! {<span class="at">:source-path</span> <span class="st">"notebooks/index.clj"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This will render an HTML page and serve it in Clay’s browser view. Note that Clay does not need to be mentioned in the namespace we wish to render.</p>
<p>See the <a href="index.html#api">API</a> and <a href="index.html#configuration">Configuration</a> subsections for more options and variations.</p>
<p>See the <a href="index.html#setup">Setup</a> section and recent <a href="index.html#videos">Videos</a> for details about integrating Clay with your editor so you do not need to call <code>make!</code> yourself.</p>
</section>
<section id="projects-using-clay" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="projects-using-clay"><span class="header-section-number">1.4</span> Projects using Clay</h2>
<ul>
<li><a href="https://scicloj.github.io/tablecloth/">Tablecloth documentation</a></li>
<li><a href="https://generateme.github.io/fastmath/clay">Fastmath 3 documentation</a></li>
<li><a href="https://scicloj.github.io/clojisr/">ClojisR documentation</a></li>
<li><a href="https://scicloj.github.io/wolframite">Wolframite documentation</a></li>
<li><a href="https://scicloj.github.io/clay/">Clay documentation</a></li>
<li><a href="https://scicloj.github.io/kindly-noted/">Kindly-noted</a> - documenting the ecosystem around Kindly - WIP</li>
<li><a href="https://scicloj.github.io/noj/">Noj documentation</a> - WIP</li>
<li><a href="https://kiramclean.github.io/clojure-tidy-tuesdays/">Clojure Tidy Tuesdays</a> data-science explorations</li>
<li><a href="https://scicloj.github.io/clojure-data-scrapbook/">Clojure Data Scrapbook</a></li>
<li><a href="https://kpassapk.github.io/llama.clj/llama.html">LLMs tutorial</a> (in spanish) by Kyle Passarelli</li>
</ul>
</section>
<section id="videos" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="videos"><span class="header-section-number">1.5</span> Videos</h2>
<table data-quarto-postprocess="true" class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<tbody>
<tr class="odd">
<td>Dec. 17th 2023</td>
<td>Cursive integration, API, configuration - blogging demo</td>
<td><iframe allowfullscreen="allowfullscreen" src="https://www.youtube.com/embed/GsML75MtNXw">
</iframe></td>
</tr>
<tr class="even">
<td>Dec. 17th 2023</td>
<td>CIDER integration - image processing demo</td>
<td><iframe allowfullscreen="allowfullscreen" src="https://www.youtube.com/embed/fd4kjlws6Ts">
</iframe></td>
</tr>
<tr class="odd">
<td>Dec. 16th 2023</td>
<td>Calva integration - datavis demo</td>
<td><iframe allowfullscreen="allowfullscreen" src="https://www.youtube.com/embed/X_SsjhmG5Ok">
</iframe></td>
</tr>
<tr class="even">
<td>Dec. 12th 2023</td>
<td>Demo &amp; Clay overview - London Clojurians - see Tim's part</td>
<td><iframe allowfullscreen="allowfullscreen" src="https://www.youtube.com/embed/skMMvxWjmNM">
</iframe></td>
</tr>
<tr class="odd">
<td>Dec. 1st 2023</td>
<td>Kindly &amp; Clay overview - visual-tools group - see Daniel's &amp; Tim's parts</td>
<td><iframe allowfullscreen="allowfullscreen" src="https://www.youtube.com/embed/DAQnvAgBma8">
</iframe></td>
</tr>
<tr class="even">
<td>June 10th 2023</td>
<td>An early overview - babashka-conf</td>
<td><iframe allowfullscreen="allowfullscreen" src="https://www.youtube.com/embed/HvhMsv3iVGM">
</iframe></td>
</tr>
</tbody>
</table>
</section>
<section id="setup" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="setup"><span class="header-section-number">1.6</span> Setup</h2>
<p>See <a href="https://github.com/scicloj/clay/tree/main/examples/example-project">the example project</a> for a concrete example.</p>
<p>To enjoy Clay’s dynamic interaction, you also need to inform it about code evaluations. This requires some editor setup.</p>
<p>To use <a href="https://quarto.org/">Quarto</a>-related actions, it is necessary to have the Quarto CLI <a href="https://quarto.org/docs/get-started/">installed</a> in your system.</p>
<p>See the suggested setup for popular editors below. If your favourite editor is not supported yet, let us talk and make it work.</p>
<section id="vscode-calva" class="level3" data-number="1.6.1">
<h3 data-number="1.6.1" class="anchored" data-anchor-id="vscode-calva"><span class="header-section-number">1.6.1</span> VSCode Calva</h3>
<p>If you now run a REPL with Clay version in your classpath, then Calva will have the relevant <a href="https://calva.io/custom-commands/">custom REPL commands</a>, as defined <a href="https://github.com/scicloj/clay/blob/main/resources/calva.exports/config.edn">here</a>.</p>
<table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>name</th>
<th>function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Clay make Namespace as HTML</code></td>
<td>will genenrate an HTML rendering of the current namespace.</td>
</tr>
<tr class="even">
<td><code>Clay make Namespace as Quarto, then HTML</code></td>
<td>will generate a Quarto <code>.qmd</code> rendering of the current namespace, then render it as HTML through Quarto.</td>
</tr>
<tr class="odd">
<td><code>Clay make Namespace as Quarto, then reveal.js</code></td>
<td>will generate a Quarto <code>.qmd</code> rendering of the current namespace, then render it as a reveal.js slideshow through Quarto.</td>
</tr>
<tr class="even">
<td><code>Clay make current form as HTML</code></td>
<td>will generate an HTML rendering of the current form, in the context of the current namespace.</td>
</tr>
</tbody>
</table>
</section>
<section id="emacs-cider" class="level3" data-number="1.6.2">
<h3 data-number="1.6.2" class="anchored" data-anchor-id="emacs-cider"><span class="header-section-number">1.6.2</span> Emacs CIDER</h3>
<p>See the <a href="https://github.com/scicloj/clay.el">clay.el</a> package for the relevant interactive functions.</p>
</section>
<section id="neovim-conjure" class="level3" data-number="1.6.3">
<h3 data-number="1.6.3" class="anchored" data-anchor-id="neovim-conjure"><span class="header-section-number">1.6.3</span> Neovim Conjure</h3>
<p>See <a href="https://github.com/Olical/conjure/wiki/Integrating-with-Clay-and-data-visualisation-tools">Integrating with Clay and data visualisation tools</a> at the Conjure Wiki.</p>
</section>
<section id="intellij-cursive" class="level3" data-number="1.6.4">
<h3 data-number="1.6.4" class="anchored" data-anchor-id="intellij-cursive"><span class="header-section-number">1.6.4</span> IntelliJ Cursive</h3>
<p>Under preferences, search for “REPL Commands” (or use the menu IntelliJ -&gt; Preferences -&gt; Languages and Frameworks -&gt; Clojure -&gt; REPL Commands)</p>
<p>Add a global command, and edit it with these settings:</p>
<p><strong>Name:</strong> Send form to Clay<br>
<strong>Execution:</strong> Command</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb2"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">do</span> (<span class="kw">require</span> '[scicloj.clay.v2.api <span class="at">:as</span> clay])</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    (clay/make! {<span class="at">:single-form</span> <span class="at">'~form-before-caret</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">:source-path</span> [<span class="st">"~file-path"</span>]}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You might also like to create a command to compile the namespace:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb3"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">do</span> (<span class="kw">require</span> '[scicloj.clay.v2.api <span class="at">:as</span> clay])</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    (clay/make! {<span class="at">:source-path</span> [<span class="st">"~file-path"</span>]}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Or a <code>top-level-form</code> (replace <code>form-before-caret</code> with <code>top-level-form</code>).</p>
<p>You can then add keybindings under Preferences -&gt; Keymap for the new commands.</p>
<p>For more information about commands, see the Cursive documentation on <a href="https://cursive-ide.com/userguide/repl.html#repl-commands">REPL commands and substitutions</a>.</p>
</section>
</section>
<section id="example-notebook-namespace" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="example-notebook-namespace"><span class="header-section-number">1.7</span> Example notebook namespace</h2>
<p>This notebook is created by <a href="https://github.com/scicloj/clay/blob/main/notebooks/index.clj">a Clojure namespace</a>. Here is the namespace definition and a few examples of what such a namespace may contain.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb4"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">ns</span> <span class="kw">index</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  (<span class="at">:require</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>   [scicloj.kindly.v4.api <span class="at">:as</span> kindly]</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>   [scicloj.kindly.v4.kind <span class="at">:as</span> kind]</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>   [scicloj.clay.v2.quarto.highlight-styles <span class="at">:as</span> quarto.highlight-styles]</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>   [scicloj.clay.v2.quarto.themes <span class="at">:as</span> quarto.themes]</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>   [scicloj.metamorph.ml.toydata <span class="at">:as</span> toydata]</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>   [scicloj.tableplot.v1.hanami <span class="at">:as</span> hanami]</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>   [tablecloth.api <span class="at">:as</span> tc]</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>   [clojure.string <span class="at">:as</span> <span class="kw">str</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A Hiccup spec:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb5"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>(kind/hiccup</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a> [<span class="at">:div</span> {<span class="at">:style</span> {<span class="at">:background</span> <span class="st">"#efe9e6"</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">:border-style</span> <span class="at">:solid</span>}}</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  [<span class="at">:ul</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>   [<span class="at">:li</span> <span class="st">"one"</span>]</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>   [<span class="at">:li</span> <span class="st">"two"</span>]</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>   [<span class="at">:li</span> <span class="st">"three"</span>]]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="background:#efe9e6;background-color:;border-style:solid;"><ul><li>one</li><li>two</li><li>three</li></ul></div>
<p>A dataset using <a href="https://scicloj.github.io/tablecloth/">Tablecloth</a>:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb6"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> {<span class="at">:x</span> (<span class="kw">range</span> <span class="dv">5</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">:y</span> (<span class="kw">repeatedly</span> <span class="dv">5</span> <span class="kw">rand</span>)}</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    tc/dataset</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    (tc/set-dataset-name <span class="st">"my dataset"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>my dataset [5 2]:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">:x</th>
<th style="text-align: right;">:y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.29284789</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.76461709</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.10006112</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.38941244</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">0.29959431</td>
</tr>
</tbody>
</table>
</div>
<p>A plot using <a href="https://github.com/scicloj/tableplot">Tableplot</a>:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb7"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (toydata/iris-ds)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    (hanami/plot hanami/rule-chart</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                 {:=x <span class="at">:sepal</span>_width</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                  :=x2 <span class="at">:sepal</span>_length</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:petal</span>_width</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>                  :=y2 <span class="at">:petal</span>_length</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>                  :=color <span class="at">:species</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>                  :=color-type <span class="at">:nominal</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>                  :=mark-size <span class="dv">3</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>                  :=mark-opacity <span class="fl">0.2</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="background-color:;"><script>vegaEmbed(document.currentScript.parentElement, {"encoding":{"color":{"field":"species","type":"nominal"},"x":{"field":"sepal_width","type":"quantitative"},"y":{"field":"petal_width","type":"quantitative"},"x2":{"field":"sepal_length","type":"quantitative"},"y2":{"field":"petal_length","type":"quantitative"}},"usermeta":{"embedOptions":{"renderer":"svg"}},"mark":{"type":"rule","size":3,"opacity":0.2,"tooltip":true},"width":400,"background":"floralwhite","height":300,"data":{"url":"index_files\/0.csv","format":{"type":"csv"}}});</script></div>
</section>
<section id="api" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="api"><span class="header-section-number">1.8</span> API</h2>
<div class="sourceClojure">
<div class="sourceCode" id="cb8"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">require</span> '[scicloj.clay.v2.api <span class="at">:as</span> clay])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The entry point of the Clay API is the <code>scicloj.clay.v2.api/make!</code> function. Here are some usage examples.</p>
<p>Evaluate and render the namespace in <code>"notebooks/index.clj"</code> as HTML and show it at the browser:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb9"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:format</span> [<span class="at">:html</span>]</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">:source-path</span> <span class="st">"notebooks/index.clj"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Do the same as above by default (since <code>:format [:html]</code> is the default):</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb10"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:source-path</span> <span class="st">"notebooks/index.clj"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Evaluate and render the namespace in <code>"notebooks/index.clj"</code> as HTML and do not show it at the browser:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb11"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:source-path</span> <span class="st">"notebooks/index.clj"</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">:show</span> <span class="va">false</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Evaluate and render the namespace in <code>"notebooks/index.clj"</code> and use the favicon at <code>"notebooks/favicon.ico"</code></p>
<div class="sourceClojure">
<div class="sourceCode" id="cb12"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:source-path</span> <span class="st">"notebooks/index.clj"</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">:favicon</span> <span class="st">"notebooks/favicon.ico"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Evaluate and render the namespaces in <code>"notebooks/slides.clj"</code> <code>"notebooks/index.clj"</code> as HTML and do not show it at the browser:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb13"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:source-path</span> [<span class="st">"notebooks/slides.clj"</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"notebooks/index.clj"</span>]</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">:show</span> <span class="va">false</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Evaluate and render the namespaces in <code>"notebooks/slides.clj"</code> <code>"notebooks/index.clj"</code> as HTML and start watching these files for live reload: (experimental)</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb14"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:source-path</span> [<span class="st">"notebooks/slides.clj"</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"notebooks/index.clj"</span>]</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">:live-reload</span> <span class="va">true</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Evaluate and render a single form in the context of the namespace in <code>"notebooks/index.clj"</code> as HTML and show it at the browser:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb15"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:source-path</span> <span class="st">"notebooks/index.clj"</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">:single-form</span> '(<span class="kw">+</span> <span class="dv">1</span> <span class="dv">2</span>)}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Evaluate and render a single form in the context of the current namespace (<code>*ns*</code>) as HTML and show it at the browser:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb16"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:single-form</span> '(<span class="kw">+</span> <span class="dv">1</span> <span class="dv">2</span>)}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Render a single value as HTML and show it at the browser:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb17"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:single-value</span> <span class="dv">3</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Render a single value as HTML and process the resulting HTML using a custom function.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb18"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:single-value</span> <span class="dv">3333</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">:post-process</span> (<span class="kw">fn</span> [html]</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>                               (<span class="kw">-&gt;</span> html</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>                                   (str/replace <span class="ss">#"3333"</span> <span class="st">"4444"</span>)))}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Render a namespace as HTML and hide the UI banner in the browser view.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb19"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:source-path</span> <span class="st">"notebooks/index.clj"</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">:hide-ui-header</span> <span class="va">true</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Render a namespace as HTML and hide the information line at the bottom of the page.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb20"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:source-path</span> <span class="st">"notebooks/index.clj"</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">:hide-info-line</span> <span class="va">true</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Evaluate and render the namespace in <code>"notebooks/index.clj"</code> as a Quarto qmd file then, using Quarto, render that file as HTML and show it at the browser:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb21"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:format</span> [<span class="at">:quarto</span> <span class="at">:html</span>]</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">:source-path</span> <span class="st">"notebooks/index.clj"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Evaluate and render the namespace in <code>"notebooks/index.clj"</code> as a Quarto qmd file and show it at the browser: (note the current browser view of this format it not so sophisticated and lacks live-reload on page updates).</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb22"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:format</span> [<span class="at">:quarto</span> <span class="at">:html</span>]</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">:source-path</span> <span class="st">"notebooks/index.clj"</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">:run-quarto</span> <span class="va">false</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Evaluate and render the namespace in <code>"notebooks/slides.clj"</code> as a Quarto qmd file (using its namespace-specific config from the ns metadata) then, using Quarto, render that file as HTML and show it at the browser:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb23"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:format</span> [<span class="at">:quarto</span> <span class="at">:html</span>]</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">:source-path</span> <span class="st">"notebooks/slides.clj"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Evaluate and render the namespace in <code>"notebooks/slides.clj"</code> as a Quarto qmd file (using its namespace-specific config from the ns metadata) then, using Quarto, render that file as a reveal.js slideshow and show it at the browser:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb24"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:format</span> [<span class="at">:quarto</span> <span class="at">:revealjs</span>]</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">:source-path</span> <span class="st">"notebooks/slides.clj"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Evaluate and render the namespace in <code>"notebooks/index.clj"</code> as a Quarto qmd file with a custom Quarto config then, using Quarto, render that file as HTML and show it at the browser:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb25"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:format</span> [<span class="at">:quarto</span> <span class="at">:html</span>]</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">:source-path</span> <span class="st">"notebooks/index.clj"</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">:quarto</span> {<span class="at">:highlight-style</span> <span class="at">:nord</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">:format</span> {<span class="at">:html</span> {<span class="at">:theme</span> <span class="at">:journal</span>}}}}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Evaluate and render the namespace in <code>"notebooks/index.clj"</code> as a Quarto qmd file with a custom Quarto config where the higlight style is fetched from the <code>scicloj.clay.v2.quarto.highlight-styles</code> namespace, and the theme is fetched from the <code>scicloj.clay.v2.quarto.themes</code> namespace, then, using Quarto, render that file as HTML and show it at the browser:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb26"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">require</span> '[scicloj.clay.v2.quarto.highlight-styles <span class="at">:as</span> quarto.highlight-styles]</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>           '[scicloj.clay.v2.quarto.themes <span class="at">:as</span> quarto.themes])</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:format</span> [<span class="at">:quarto</span> <span class="at">:html</span>]</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">:source-path</span> <span class="st">"notebooks/index.clj"</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">:quarto</span> {<span class="at">:highlight-style</span> quarto.highlight-styles/nord</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">:format</span> {<span class="at">:html</span> {<span class="at">:theme</span> quarto.themes/journal}}}}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Evaluate and render the namespace in <code>"index.clj"</code> under the <code>"notebooks"</code> directory as HTML and show it at the browser:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb27"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:base-source-path</span> <span class="st">"notebooks/"</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">:source-path</span> <span class="st">"index.clj"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Create a Quarto book with a default generated index page:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb28"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:format</span> [<span class="at">:quarto</span> <span class="at">:html</span>]</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">:base-source-path</span> <span class="st">"notebooks"</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">:source-path</span> [<span class="st">"chapter.clj"</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"another_chapter.md"</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"a_chapter_with_R_code.Rmd"</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"test.ipynb"</span>]</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">:base-target-path</span> <span class="st">"book"</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">:book</span> {<span class="at">:title</span> <span class="st">"Book Example"</span>}</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>               <span class="co">;; Empty the target directory first:</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">:clean-up-target-dir</span> <span class="va">true</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Create a Quarto book with a specified favicon:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb29"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:format</span> [<span class="at">:quarto</span> <span class="at">:html</span>]</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">:base-source-path</span> <span class="st">"notebooks"</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">:source-path</span> [<span class="st">"index.clj"</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"chapter.clj"</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"another_chapter.md"</span>]</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">:base-target-path</span> <span class="st">"book"</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">:book</span> {<span class="at">:title</span> <span class="st">"Book Example"</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>                      <span class="at">:favicon</span> <span class="st">"notebooks/favicon.ico"</span>}</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>               <span class="co">;; Empty the target directory first:</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">:clean-up-target-dir</span> <span class="va">true</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Create a Quarto book with <a href="https://quarto.org/docs/books/book-structure.html#parts-appendices">book parts</a>:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb30"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  (clay/make! {<span class="at">:format</span> [<span class="at">:quarto</span> <span class="at">:html</span>]</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">:base-source-path</span> <span class="st">"notebooks"</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">:source-path</span> [{<span class="at">:part</span> <span class="st">"Part A"</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">:chapters</span> [<span class="st">"index.clj"</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"chapter.clj"</span>]}</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>                             {<span class="at">:part</span> <span class="st">"Part B"</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>                              <span class="at">:chapters</span> [<span class="st">"another_chapter.md"</span>]}]</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">:base-target-path</span> <span class="st">"book"</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">:book</span> {<span class="at">:title</span> <span class="st">"Book Example"</span>}</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>               <span class="co">;; Empty the target directory first:</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">:clean-up-target-dir</span> <span class="va">true</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Reopen the Clay view in the browser (in case you closed the browser tab previously opened):</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb31"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  (clay/browse!))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="live-reload" class="level3" data-number="1.8.1">
<h3 data-number="1.8.1" class="anchored" data-anchor-id="live-reload"><span class="header-section-number">1.8.1</span> Live reload</h3>
<p>(experimental)</p>
<p>Clay can listen to file changes (using <a href="https://github.com/nextjournal/beholder">nextjournal/beholder</a>) and respond with remaking the page.</p>
<p>See the example above with <code>:live-reload true</code>.</p>
</section>
<section id="hiccup-output" class="level3" data-number="1.8.2">
<h3 data-number="1.8.2" class="anchored" data-anchor-id="hiccup-output"><span class="header-section-number">1.8.2</span> Hiccup output</h3>
<p>(experimental 🛠)</p>
<p>Render a notebook in Hiccup format and return the resulting Hiccup structure:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb32"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">comment</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  (clay/make-hiccup {<span class="at">:source-path</span> <span class="st">"notebooks/index.clj"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="configuration" class="level2" data-number="1.9">
<h2 data-number="1.9" class="anchored" data-anchor-id="configuration"><span class="header-section-number">1.9</span> Configuration</h2>
<p>Calls to the <code>make!</code> function are affected by various parameters which collected as one nested map. This map is the result of deep-merging four sources:</p>
<ul>
<li><p>the default configuration: <a href="https://github.com/scicloj/clay/blob/main/resources/clay-default.edn">clay-default.edn</a> under Clay’s resources</p></li>
<li><p>the user configuration: <code>clay.edn</code> at the top</p></li>
<li><p>the namespace configuration: the <code>:clay</code> member of the namespace metadata</p></li>
<li><p>the call configuration: the argument to <code>make!</code></p></li>
</ul>
<p>Here are some of the parameters worth knowing about:</p>
<table class="table">
<colgroup>
<col style="width: 21%">
<col style="width: 39%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th>Key</th>
<th>Purpose</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>:source-path</code></td>
<td>files to render</td>
<td><code>["notebooks/index.clj"]</code></td>
</tr>
<tr class="even">
<td><code>:title</code></td>
<td>sets the HTML title that appears in the browser tab bar</td>
<td><code>"My Title"</code></td>
</tr>
<tr class="odd">
<td><code>:favicon</code></td>
<td>sets a page favicon</td>
<td><code>"favicon.ico"</code></td>
</tr>
<tr class="even">
<td><code>:show</code></td>
<td>starts the HTML server when true (the default)</td>
<td><code>false</code></td>
</tr>
<tr class="odd">
<td><code>:single-form</code></td>
<td>render just one form</td>
<td><code>(inc 1)</code></td>
</tr>
<tr class="even">
<td><code>:format</code></td>
<td>output quarto markdown and/or html</td>
<td><code>[:quarto :html]</code></td>
</tr>
<tr class="odd">
<td><code>:quarto</code></td>
<td>adds configuration for Quarto</td>
<td><code>{:highlight-style :solarized}</code></td>
</tr>
<tr class="even">
<td><code>:base-target-path</code></td>
<td>the output directory</td>
<td><code>"temp"</code></td>
</tr>
<tr class="odd">
<td><code>:base-source-path</code></td>
<td>where to find <code>:source-path</code></td>
<td><code>"notebooks"</code></td>
</tr>
<tr class="even">
<td><code>:clean-up-target-dir</code></td>
<td>delete (!) target directory before repopulating it</td>
<td><code>true</code></td>
</tr>
<tr class="odd">
<td><code>:remote-repo</code></td>
<td>linking to source</td>
<td><code>{:git-url "https://github.com/scicloj/clay" :branch  "main"}</code></td>
</tr>
<tr class="even">
<td><code>:hide-info-line</code></td>
<td>hiding the source reference at the bottom</td>
<td><code>true</code></td>
</tr>
<tr class="odd">
<td><code>:hide-ui-header</code></td>
<td>hiding the ui info at the top</td>
<td><code>true</code></td>
</tr>
<tr class="even">
<td><code>:post-process</code></td>
<td>post-processing the resulting HTML</td>
<td><code>#(str/replace "#3" "4")</code></td>
</tr>
<tr class="odd">
<td><code>:live-reload</code></td>
<td>whether to make and live reload the HTML automatically after its source file is changed</td>
<td><code>true</code></td>
</tr>
</tbody>
</table>
<p>When working interactively, it is helpful to render to a temporary directory that can be git ignored and discarded. For example: you may set <code>:base-target-path "temp"</code> at your <code>clay.edn</code> file. When publishing a static page, you may wish to target a <code>docs</code> directory by setting <code>:base-target-path "docs"</code> in your call to <code>clay/make!</code>. Creating a dev namespace is a good way to invoke a different configuration for publishing.</p>
</section>
<section id="kinds" class="level2" data-number="1.10">
<h2 data-number="1.10" class="anchored" data-anchor-id="kinds"><span class="header-section-number">1.10</span> Kinds</h2>
<p>The way things should be visualized is determined by the <a href="https://scicloj.github.io/kindly-noted/kindly">Kindly</a> specification.</p>
<p>Kindly advises tools (like Clay) about the kind of way a given context should be displayed, by assigning to it a so-called kind.</p>
<p>Please refer to the Kindly documentation for details about specifying and using kinds.</p>
<p>In this documentation we demonstrate Kindly’s default advice. <a href="https://scicloj.github.io/kindly-noted/kindly_advice.html#extending">User-defined</a> Kindly <a href="https://scicloj.github.io/kindly-noted/kindly_advice.html">advices</a> should work as well.</p>
</section>
<section id="examples" class="level2" data-number="1.11">
<h2 data-number="1.11" class="anchored" data-anchor-id="examples"><span class="header-section-number">1.11</span> Examples</h2>
<p>See the dedicated 📖 <a href="./clay_book.examples.html">Examples chapter</a> 📖 of this book.</p>
</section>
<section id="fragments" class="level2" data-number="1.12">
<h2 data-number="1.12" class="anchored" data-anchor-id="fragments"><span class="header-section-number">1.12</span> Fragments</h2>
<p><code>kind/fragment</code> is a special kind. It expects a sequential value and generates multiple items, of potentially multiple kinds, from its elements.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb33"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> [<span class="st">"purple"</span> <span class="st">"darkgreen"</span> <span class="st">"brown"</span>]</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>     (<span class="kw">mapcat</span> (<span class="kw">fn</span> [color]</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>               [(kind/md (<span class="kw">str</span> <span class="st">"### subsection: "</span> color))</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                (kind/hiccup [<span class="at">:div</span> {<span class="at">:style</span> {<span class="at">:background-color</span> color</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">:color</span> <span class="st">"lightgrey"</span>}}</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>                              [<span class="at">:big</span> [<span class="at">:p</span> color]]])]))</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>     kind/fragment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="subsection-purple" class="level3" data-number="1.12.1">
<h3 data-number="1.12.1" class="anchored" data-anchor-id="subsection-purple"><span class="header-section-number">1.12.1</span> subsection: purple</h3>
<div style="background-color:;color:lightgrey;"><big><p>purple</p></big></div>
</section>
<section id="subsection-darkgreen" class="level3" data-number="1.12.2">
<h3 data-number="1.12.2" class="anchored" data-anchor-id="subsection-darkgreen"><span class="header-section-number">1.12.2</span> subsection: darkgreen</h3>
<div style="background-color:;color:lightgrey;"><big><p>darkgreen</p></big></div>
</section>
<section id="subsection-brown" class="level3" data-number="1.12.3">
<h3 data-number="1.12.3" class="anchored" data-anchor-id="subsection-brown"><span class="header-section-number">1.12.3</span> subsection: brown</h3>
<div style="background-color:;color:lightgrey;"><big><p>brown</p></big></div>
<div class="sourceClojure">
<div class="sourceCode" id="cb34"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;&gt;</span> (<span class="kw">range</span> <span class="dv">3</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>     kind/fragment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb35"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb36"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb37"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Importantly, markdown subsections affect the Quarto table of contents.</p>
</section>
</section>
<section id="functions" class="level2" data-number="1.13">
<h2 data-number="1.13" class="anchored" data-anchor-id="functions"><span class="header-section-number">1.13</span> Functions</h2>
<p><code>kind/fn</code> is a special kind. It is displayed by first evaluating a given function and arguments, then proceeding recursively with the resulting value.</p>
<p>The function can be specified through the Kindly options.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb38"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>(kind/fn {<span class="at">:x</span> <span class="dv">1</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">:y</span> <span class="dv">2</span>}</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:kindly/f</span> (<span class="kw">fn</span> [{<span class="at">:keys</span> [x y]}]</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>               (<span class="kw">+</span> x y))})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb39"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb40"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>(kind/fn {<span class="at">:my-video-src</span> <span class="st">"https://file-examples.com/storage/fe58a1f07d66f447a9512f1/2017/04/file_example_MP4_480_1_5MG.mp4"</span>}</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:kindly/f</span> (<span class="kw">fn</span> [{<span class="at">:keys</span> [my-video-src]}]</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>               (kind/video</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>                {<span class="at">:src</span> my-video-src}))})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<video controls="" style="background-color:;"><source src="https://file-examples.com/storage/fe58a1f07d66f447a9512f1/2017/04/file_example_MP4_480_1_5MG.mp4" type="video/mp4"></video>
<p>If the value is a vector, the function is the first element, and the arguments are the rest.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb41"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>(kind/fn</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  [<span class="kw">+</span> <span class="dv">1</span> <span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb42"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If the value is a map, the function is held at the key <code>:kindly/f</code>, and the argument is the map.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb43"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>(kind/fn</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:kindly/f</span> (<span class="kw">fn</span> [{<span class="at">:keys</span> [x y]}]</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>               (<span class="kw">+</span> x y))</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x</span> <span class="dv">1</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>   <span class="at">:y</span> <span class="dv">2</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb44"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The kind of the value returned by the function is respected. For example, here are examples with a function returning <code>kind/dataset</code>.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb45"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>(kind/fn</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:x</span> (<span class="kw">range</span> <span class="dv">3</span>)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">:y</span> (<span class="kw">repeatedly</span> <span class="dv">3</span> <span class="kw">rand</span>)}</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:kindly/f</span> tc/dataset})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>_unnamed [3 2]:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">:x</th>
<th style="text-align: right;">:y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.31839548</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.38248222</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.11243473</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb46"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>(kind/fn</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  [tc/dataset</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>   {<span class="at">:x</span> (<span class="kw">range</span> <span class="dv">3</span>)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">:y</span> (<span class="kw">repeatedly</span> <span class="dv">3</span> <span class="kw">rand</span>)}])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>_unnamed [3 2]:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">:x</th>
<th style="text-align: right;">:y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.03981821</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.80997852</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.92410797</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb47"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>(kind/fn</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:kindly/f</span> tc/dataset</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x</span> (<span class="kw">range</span> <span class="dv">3</span>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">:y</span> (<span class="kw">repeatedly</span> <span class="dv">3</span> <span class="kw">rand</span>)})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>_unnamed [3 2]:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">:x</th>
<th style="text-align: right;">:y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.73790227</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.84458771</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.18056079</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="delays" class="level2" data-number="1.14">
<h2 data-number="1.14" class="anchored" data-anchor-id="delays"><span class="header-section-number">1.14</span> Delays</h2>
<p>Clojure Delays are a common way to define computations that do not take place immediately. The computation takes place when dereferencing the value for the first time.</p>
<p>Clay makes sure to dererence Delays when passing values for visualization.</p>
<p>This is handy for slow example snippets and explorations, that one would typically not like to slow down the evaluation of the whole namespace, but would like to visualize them on demand and also include in them in the final document.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb48"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">delay</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  (Thread/sleep <span class="dv">500</span>)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">+</span> <span class="dv">1</span> <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb49"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="referring-to-files" class="level2" data-number="1.15">
<h2 data-number="1.15" class="anchored" data-anchor-id="referring-to-files"><span class="header-section-number">1.15</span> Referring to files</h2>
<p>In data visualizations, one can directly refrer to files places under <code>"notebooks/"</code> or <code>"src/"</code>. By default, all files except of these directories, except for Clojure files, are copied alongside the HTML target.</p>
<p>This default can be overridden using the <code>:subdirs-to-sync</code> config option. E.g., <code>:subdirs-to-sync ["notebooks" "data"]</code> will copy files from the <code>"notebooks"</code> and <code>"data"</code> directories, but not from <code>"src"</code>. Clojure source files (<code>.clj</code>, etc.) are not synched.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb50"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>(kind/hiccup</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a> [<span class="at">:img</span> {<span class="at">:src</span> <span class="st">"notebooks/images/Clay.svg.png"</span>}])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<img src="notebooks/images/Clay.svg.png" style="background-color:;">
<div class="sourceClojure">
<div class="sourceCode" id="cb51"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>(kind/image</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a> {<span class="at">:src</span> <span class="st">"notebooks/images/Clay.svg.png"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-image">
<img class="clay-image" src="notebooks/images/Clay.svg.png" style="background-color:;">
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb52"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>(kind/vega-lite</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a> {<span class="at">:data</span> {<span class="at">:url</span> <span class="st">"notebooks/datasets/iris.csv"</span>},</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">:mark</span> <span class="st">"rule"</span>,</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">:encoding</span> {<span class="at">:opacity</span> {<span class="at">:value</span> <span class="fl">0.2</span>}</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">:size</span> {<span class="at">:value</span> <span class="dv">3</span>}</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">:x</span> {<span class="at">:field</span> <span class="st">"sepal_width"</span>, <span class="at">:type</span> <span class="st">"quantitative"</span>},</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">:x2</span> {<span class="at">:field</span> <span class="st">"sepal_length"</span>, <span class="at">:type</span> <span class="st">"quantitative"</span>},</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">:y</span> {<span class="at">:field</span> <span class="st">"petal_width"</span>, <span class="at">:type</span> <span class="st">"quantitative"</span>},</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">:y2</span> {<span class="at">:field</span> <span class="st">"petal_length"</span>, <span class="at">:type</span> <span class="st">"quantitative"</span>},</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">:color</span> {<span class="at">:field</span> <span class="st">"species"</span>, <span class="at">:type</span> <span class="st">"nominal"</span>}}</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">:background</span> <span class="st">"floralwhite"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="background-color:;"><script>vegaEmbed(document.currentScript.parentElement, {"data":{"url":"notebooks\/datasets\/iris.csv"},"mark":"rule","encoding":{"opacity":{"value":0.2},"size":{"value":3},"x":{"field":"sepal_width","type":"quantitative"},"x2":{"field":"sepal_length","type":"quantitative"},"y":{"field":"petal_width","type":"quantitative"},"y2":{"field":"petal_length","type":"quantitative"},"color":{"field":"species","type":"nominal"}},"background":"floralwhite"});</script></div>
</section>
<section id="hiding-code" class="level2" data-number="1.16">
<h2 data-number="1.16" class="anchored" data-anchor-id="hiding-code"><span class="header-section-number">1.16</span> Hiding code</h2>
<p>By default, a Clay notebook shows both the code and the result of an evaluated form. Here are a few ways one may hide the code:</p>
<ol type="1">
<li>Add the metadata <code>:kindly/hide-code true</code> to the form (e.g., by preceding it with <code>^:kindly/hide-code</code>).</li>
<li>Add the metadata <code>:kindly/hide-code true</code> to the value.</li>
<li>Globally define certain kinds (e.g., <code>:kind/md</code>, <code>:kind/hiccup</code>) to always hide code (on project level or namespace level) by adding theme as a set to the project config or namespace config, e.g., <code>:kindly/options {:kinds-that-hide-code #{:kind/md :kind/hiccup}}</code>.</li>
</ol>
</section>
<section id="test-generation" class="level2" data-number="1.17">
<h2 data-number="1.17" class="anchored" data-anchor-id="test-generation"><span class="header-section-number">1.17</span> Test generation</h2>
<p>(experimental 🛠)</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb53"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">+</span> <span class="dv">1</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb54"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We generate tests checking whether this last value is greater than 2.9. We can do it in a few ways.</p>
<p>We include the test annotations in the markdown text, since the annotations themselves are invisible.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb55"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>(kind/test-last [<span class="kw">&gt;</span> <span class="fl">2.9</span>])</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>^kind/test-last</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>[<span class="kw">&gt;</span> <span class="fl">2.9</span>]</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>(kindly/check <span class="kw">&gt;</span> <span class="fl">2.9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>See the generated <a href="https://github.com/scicloj/clay/blob/main/test/index_generated_test.clj">test/index_generated_test.clj</a>.</p>
<p>For a detailed example using this mechanism, see <a href="https://github.com/scicloj/clojisr/blob/master/notebooks/clojisr/v1/tutorials/main.clj">the source</a> of the <a href="https://scicloj.github.io/clojisr/clojisr.v1.tutorials.main.html">ClojisR tutorial</a>.</p>
</section>
<section id="css-classes-and-styles" class="level2" data-number="1.18">
<h2 data-number="1.18" class="anchored" data-anchor-id="css-classes-and-styles"><span class="header-section-number">1.18</span> CSS classes and styles</h2>
<section id="styling-html-visualizations" class="level3" data-number="1.18.1">
<h3 data-number="1.18.1" class="anchored" data-anchor-id="styling-html-visualizations"><span class="header-section-number">1.18.1</span> Styling HTML visualizations</h3>
<p>Clay will transfer CSS classes and styles present in <code>:kindly/options</code> metadata to the visualization. The recommended way to prepare <code>:kindly/options</code> metadata is through the <code>kind</code> api:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb56"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>(kind/table {<span class="at">:column-names</span> [<span class="st">"A"</span> <span class="st">"B"</span> <span class="st">"C"</span>]</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">:row-vectors</span>  [[<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>] [<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>]]}</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>            {<span class="at">:class</span> <span class="st">"table-responsive"</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">:style</span> {<span class="at">:background</span> <span class="st">"#f8fff8"</span>}})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-table">
<div class="table-responsive">
<table data-quarto-postprocess="true" class="table">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">A</th>
<th data-quarto-table-cell-role="th">B</th>
<th data-quarto-table-cell-role="th">C</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="even">
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>See also the Kindly documentation on <a href="https://scicloj.github.io/kindly-noted/kindly#passing-options">passing options</a>. Optional class and style attributes will only be applied to hiccup elements (not markdown content).</p>
</section>
<section id="styling-markdown-content" class="level3" data-number="1.18.2">
<h3 data-number="1.18.2" class="anchored" data-anchor-id="styling-markdown-content"><span class="header-section-number">1.18.2</span> Styling Markdown content</h3>
<p>Quarto uses pandoc attributes (see https://quarto.org/docs/authoring/markdown-basics.html#sec-divs-and-spans) to attach classes.</p>
<pre><code>::: {.alert .alert-primary}
Example alert
:::</code></pre>
<div class="alert alert-primary">
<p>Example alert</p>
</div>
<div class="table-responsive">
<table class="table">
<caption>This table is responsive</caption>
<thead>
<tr class="header">
<th>A</th>
<th>B</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="even">
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
</tbody>
</table>
</div>
<p>Markdown styling is not currently handled when rendering direct to HTML.</p>
</section>
</section>
<section id="varying-kindly-options" class="level2" data-number="1.19">
<h2 data-number="1.19" class="anchored" data-anchor-id="varying-kindly-options"><span class="header-section-number">1.19</span> Varying kindly options</h2>
<p>(experimental)</p>
<p><code>kindly/merge-options!</code> varies the options to affect the notes coming below. Let us use it to present code and value horizontally. By default, calls to <code>kindly/merge-options!</code> are hidden. In this document, we use <code>#(kindly/hide-code % false)</code> to make them visible.`</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb58"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>(kindly/hide-code</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a> (kindly/merge-options! {<span class="at">:code-and-value</span> <span class="at">:horizontal</span>})</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a> <span class="va">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="grid clay-side-by-side">
<div class="g-col-6">
<div class="sourceClojure">
<div class="sourceCode" id="cb59"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">+</span> <span class="dv">1</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="g-col-6">
<div class="printedClojure">
<div class="sourceCode" id="cb60"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="grid clay-side-by-side">
<div class="g-col-6">
<div class="sourceClojure">
<div class="sourceCode" id="cb61"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">+</span> <span class="dv">3</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="g-col-6">
<div class="printedClojure">
<div class="sourceCode" id="cb62"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Let us change it back.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb63"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>(kindly/hide-code</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a> (kindly/merge-options! {<span class="at">:code-and-value</span> <span class="at">:vertical</span>})</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a> <span class="va">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb64"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">+</span> <span class="dv">1</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb65"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb66"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">+</span> <span class="dv">3</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb67"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us now change the background color.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb68"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>(kindly/hide-code</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a> (kindly/merge-options! {<span class="at">:style</span> {<span class="at">:background-color</span> <span class="st">"#ccddee"</span>}})</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a> <span class="va">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb69"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>(kind/hiccup</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a> [<span class="at">:div</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  [<span class="at">:p</span> <span class="st">"hello"</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="background-color:#ccddee;"><p>hello</p></div>
<p>In Quarto-based rendering, datasets are rendered as plain Markdown, and HTML options are not applied at the moment.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb70"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>(tc/dataset {<span class="at">:x</span> (<span class="kw">range</span> <span class="dv">3</span>)})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>_unnamed [3 1]:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">:x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
<p>To make sure the background color is applied, we wrap it with Hiccup.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb71"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>(kind/hiccup</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a> [<span class="at">:div</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  (tc/dataset {<span class="at">:x</span> (<span class="kw">range</span> <span class="dv">3</span>)})])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="background-color:#ccddee;"><div class="clay-dataset" style="background-color:#ccddee;"><p>_unnamed [3 1]:</p>
<table class="table" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">:x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div></div>
<p>Let us cancel the setting of the background color.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb72"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>(kindly/hide-code</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a> (kindly/merge-options! {<span class="at">:style</span> {<span class="at">:background-color</span> <span class="va">nil</span>}})</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a> <span class="va">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb73"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>(kind/hiccup</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a> [<span class="at">:div</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  [<span class="at">:p</span> <span class="st">"hello"</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="background-color:;"><p>hello</p></div>
<div style="background-color:grey;height:2px;width:100%;"></div>
<div><pre><small><small>source: <a href="https://github.com/scicloj/clay/blob/main/notebooks/index.clj">notebooks/index.clj</a></small></small></pre></div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
  </div>
  <div class="nav-page nav-page-next">
      <a href="./clay_book.examples.html" class="pagination-link" aria-label="Examples">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Examples</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>